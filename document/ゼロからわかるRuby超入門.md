# 📖ゼロからわかるRuby超入門
**<details><summary>CHAPTER 1 環境を作る</summary>**
ようこそ、Rubyプログラミングの世界へ。プログラムを書くためには、Rubyやエディターなどのツールを使います。これらのツールはあなたのプログラミングの支えになってくれるでしょう。この章では、Rubyやエディターのインストール方法とRubyプログラムの動かし方を説明します。
- 1-5 プログラムを書いて実行する
    
    ここでは、Rubyのプログラムを作成して、実行するまでの流れを解説します。最初にエディターでプログラムを書いて、コマンドプロンプトで実行するだけで、すぐに結果を確認できます。
    
    - プログラムを保存するフォルダを作る
        - ファイルは /Users/[ユーザー名]/rubybook に保存します。
        - ターミナルを起動して、mkdir rubybook と入力してフォルダを作ります。
        - フォルダが作成できたかを確認するために、open . と入力してreturnキーを押します。すると、Finderが開いてフォルダの確認ができます。
    - プログラムをファイルに保存する
        - Rubyのプログラムが書かれたプログラムは、.rbをファイル名の末尾につけるのが習慣です。また、Rubyではファイル名は全て小文字を使うことが一般的です。
        - Visual Studio Codeでは、メニューから「ファイル」→「名前をつけて保存」を選択する。
    - ターミナルでプログラムを保存したフォルダへ移動する
        - cd rubybook returnキーで保存されているフォルダに移動します。
        - ターミナルでは、プログラムファイルがあるフォルダへ移動してプログラムを実行します。
        - 現在いるフォルダのことをカレントディレクトリと言います(ディレクトリはフォルダの別の呼び方です)。
        - カレントディレクトリを移動させるにはcdコマンド(change directoryの略)を使います。
        - フォルダをキーボードから入力するのが大変な時は、フォルダをターミナルへドラッグアンドドロップすると簡単に入力できます。
    - ターミナルでプログラムを実行する
        - Rubyプログラムを実行するには、ターミナルで ruby ファイル名 と入力し、returnキーを押します。
    - 基本的なコマンド
        - ターミナルの世界ではRuby言語とは違う言語である Shell言語を使います。
        - `cd`:フォルダを移動 `cd` の後ろに半角スペースを入れ、フォルダ名を入力します。
            
            例) `cd rubybook`
            
            1つ上のフォルダへ移動する時は、フォルダ名に`..`を指定します。
            
        - `pwd`:現在のフォルダを表示。フォルダはスラッシュ(`/`)で区切られます。
            
            `pwd` return
            
            `/Users/[ユーザー名]/rubybook`
            
        - `ls`:ファイル一覧を表示
            
            `ls` return
            
        - `ruby`:Rubyのプログラムを実行する。
            
            Rubyのプログラムを実行します。プログラムファイルがあるフォルダへ移動してから、rubyに続けてプログラムファイルを指定して実行します。実行結果は次の行に出力されます。
            
            `ruby hi.rb` return
            
        - `control + c`:プログラムを強制的に終了する。
            
            Rubyのプログラムの実行時に何らかの理由でプログラムが終了しなくなった場合は、`control  + c`で強制的に終了できます。
            
    - COLUMN コマンドをラクラク入力
        - 上下カーソルキーでコマンド履歴を表示して、以前に実行したコマンドを再実行できます。また、途中まで入力した状態で`tab`を押すと、ファイル名やフォルダ名などを補完してくれます。</details>

**<details><summary>CHAPTER 2 かんたんなプログラムを書く</summary>**
プログラムを書くことで、様々な問題をコンピュータを使って解決することができます。難しい問題を解くプログラムは難しくなりがちですが、短いプログラムでも解ける問題はたくさんあるので、最初は短いプログラムから始めましょう。この章では、短い簡単なプログラムを使ってRubyとプログラミングの基礎を説明していきます。
- 2-1 計算する
    
    最初は、計算をするプログラムから始めましょう。整数や少数の計算をして画面に表示するプログラムを書いて実行し、算数の答えがプログラムから得られることを見ていきましょう。
    
    - 数値を表示する
        - 実行するには、ターミナルで`cd ファイル名`でプログラムが置いてあるフォルダへ移動して、`ruby ファイル名`でプログラムを実行する。
        - `puts`は、後ろに書いたものを画面に表示するメソッドです。メソッドは英語で方法や手段という意味で、ここでは「命令」と考えると分かりやすいです。
        - 1は整数オブジェクト、または単に整数と呼びます。オブジェクトは日本語では「もの」という意味で、Rubyの世界での「もの」がオブジェクトです。
    - 少数を計算する
        - `puts` `5 / 2`は、`2.5`にならずに`2`となります。これは、Rubyでは整数と少数は別のものとして扱われ、整数同士の計算の結果は整数になるルールだからです。余りの`0.5`は切り捨てられます。結果として`2.5`を得るためには、`.0`をつけて(両方または一方を)少数の計算にすればOKです。`5.0`や`2.0`は少数オブジェクト、または単に少数と呼びます。
    - 累乗と余剰を計算する
        - `puts 2 ** 8` —累乗。2の8乗。実行結果は「256」
            
            `puts 7 % 3` —剰余。7を3で割ったあまり。実行結果は「1」
- 2-2 文字列を表示する
    
    プログラムで文字を扱う時には文字列を使います。文字列はプログラムでよく使う部品の一つです。ここでは、文字列を表示したり、足し算を使って繋げる方法を説明していきます。
    
    - 文字列を表示する
        - `“hello world!”`は文字列オブジェクト、文字列と呼びます。文字の前後を”(ダブルクォーテーション)で囲むと文字列になります。
    - 文字列を足し算する
        - 数値と同じく、文字列は足すこともできます。
        - `2 + 3` は`5`、`”2” + “3”`は文字列を繋げた結果の`23`になっています。Rubyでは数値と文字列は別物として扱われるためです。数字をそのまま書くと数値、”で囲むと文字列と扱います。
    - 数値と文字列を足すとどうなる？
        - エラーが表示されます。Rubyではエラーが出ると、プログラムを意図通りに動かすヒントが書かれたメッセージが出ます。
            
            `error1.rb:1:in `+': String can't be coerced into Integer (TypeError) from error1.rb:1: in `<main>'`
            
            「error1.rb というファイルの1行目、String can’t be coerced into Integer(文字列は整数には変換できない)なので、TypeErrorです」となります。
            
    - 文字列を数値に変換する
        - 整数を文字列へ変換する、`to_s`メソッド、文字列を整数へ変換する`to_i`メソッドを使って、数値、文字列に揃える方法があります。
        - `to_s`は英単語のto(〜へ)とstring(文字列)の頭文字のsの組み合わせで、「文字列へ(変換)」という意味です。`to_i`のiはinteger(整数)の頭文字で、「整数へ(変換)」という意味です。
        - これらのメソッドはオブジェクトの後ろに.をつけて書きます。`3.to_s`は整数オブジェクト3を変換して文字列オブジェクト`”3”`を作ります。`”3”.to_i`は文字列オブジェクト`”3”`を変換して整数オブジェクト`3`を作ります。
        - 「オブジェクトに対して何かする」型のメソッドは大抵の場合、「`オブジェクト.メソッド`」形をとります。
- 2-3 オブジェクトと変数を理解する
    
    これまでにたびたび出てきた「オブジェクト」について説明します。また、オブジェクトに名札を付けることができる道具「変数」についても説明します。
    
    - オブジェクトとは
        - オブジェクトとは、Rubyの世界での「もの」です。プログラムの中でデータを持ったり、操作したりする対象です。`1`はオブジェクトです。詳しく言えば、整数オブジェクトです。`5.0`や`2.0`もオブジェクトで少数オブジェクトです。`”カフェラテ"`は文字列オブジェクトです。因みに、putsはメソッド(命令)と呼ばれる、別の種類です。
        - オブジェクトの種類のことをクラスと言います。例えば、整数オブジェクトはInteger(整数の意味)オブジェクトと呼ぶこともあり、このIntegerがクラスの名前です。同様に、少数オブジェクトはStringオブジェクトとも呼び、Stringがクラスの名前です。
    - 変数とは
        - 変数はオブジェクトにつける名札です。
        - `order = “カフェラテ”`は「変数orderに”カフェラテ”を代入する」と言います。イコール(=)の左側が変数、右側が代入するオブジェクトです。左右を逆にして書くことはできません。
        
        ```ruby
        order = "カフェラテ" # 文字列カフェラテを変数orderに紐付ける。
        puts order # カフェラテが表示される。
        ```
        
    - 文字列に計算結果を埋め込む
        - `#{計算式}`と書くことで、文字列に計算結果を埋め込んで表示できます。これを**式展開**と言います。計算式を文字列に展開する、という意味です。
        
        ```ruby
        puts "1 + 2の答えは#{1 + 2}です"
        # 1 + 2の答えは3です
        ```
        
        - 式展開(#{計算式})は、変数を使うこともできます。式展開に変数を書くことで、変数に代入されたオブジェクトを埋め込むことができます。
        
        ```ruby
        order = "カフェラテ"
        puts "ご注文は#{order}ですね？" # 式展開を使う書き方
        puts "ご注文は" + order + "ですね？" # 足し算を使う書き方
        ```
        
        このように、同じ結果を得るプログラムでも、さまざまな書き方があります。式展開には変数のほか、さまざまなRubyのプログラムを埋め込むこともあります。
        
    - 変数の名前のルールを確認する
        - 変数の名前には原則として、英字、数字、_(アンダーバー、アンダースコア)を使います。ただし、先頭は英字小文字または_で始める必要があります。
        - 慣習では、英字は全て小文字で書き、2単語以上繋げる時は_を間に入れます。`my_order`、`my_favorite_order`といった具合です。このスタイルを**スネークケース**と言います。
        - プログラムの読み手を思い浮かべて、意味のある、良い名前をつけた方がプログラムは読みやすくなります。ここでの読み手は、自分も含まれます。
        
        ```ruby
        良い例: order , x1
        悪い例: Order , ORDER , 1x
        ```
        
    - キーボードから値を入力する
        - `gets`メソッドは、ターミナル上から値を入力するプログラムを書くことができます。そして、入力された文字列を整数での計算にするために`to_i`メソッドを使います。
    - COLUMN 定数とは
        - 定数という仕組みがあります。定数は、変数のように代入ができますが、2回目に代入しようとするとwarningが出ます。
        
        ```ruby
        CaffeLatte = "カフェラテ" # CaffeLatteは定数。1回目の代入。
        puts CaffeLatte
        CaffeLatte = "カフェラッテ" # 定数CaffeLatteへ2回目の代入。warningが表示する。
        puts CaffeLatte
        ```
        
        ```ruby
        カフェラテ
        const.rb:3: warning: already initialized constant CaffeLatte
        const.rb:1: warning: previous definition of CaffeLatte was here
        カフェラッテ
        ```
        
        - warningは好ましくない処理をする時にメッセージを表示し、渋々実行してくれるものです。定数は固定しておくものなので、変更しようとすると「意図通りですか？」とwarningが表示されて教えてくれるというわけです。warningが表示されますが、代入は実行されます。
        - 先頭が大文字の名前をつけると、定数になります。2文字目以降は小文字も大文字も使えます。
    - 📍**まとめ**
        - オブジェクトは、Rubyの世界での「もの」。
        - オブジェクトには文字列オブジェクト、整数オブジェクト、少数オブジェクトなどがある。
        - 変数はオブジェクトに貼る名札で、名札を貼ることを変数へ代入するという。
        - 変数が使われる時は、先にその変数に代入しておいたオブジェクトとして扱われる。
        - 変数名の先頭は英字小文字または_で始め、英字、数字、_を使うことができる。
        - #{計算式}と書くことで計算結果を文字列の中に埋める。
- 2-4 プログラムにコメントを書く
    
    将来プログラムを読んだ時のために、理解を助ける説明文を書いておくと便利なことがあります。プログラムの中に説明を書くことができるコメントについて説明します。
    
    - 行の途中からコメントにする
        - **#**は行の先頭だけでなく、行の途中から書くこともできます。行の途中から書いた場合、#よりも後ろに描かれた部分がコメントとなり、実行されなくなります。
    - 空行は無視される
        - プログラムには読みやすくするための区切りとして空行が使えますが、実行する時には空行は無視されます。
    - 数行にわたってコメントにする
        - 長い行をまとめてコメントにする場合、各行頭に#を書くのが大変な時もあります。その場合は、`=begin`から`=end`で囲むと、その範囲はコメントとして扱われます。書く時は、行の先頭から書く必要があるので注意してください。
        
        ```ruby
        puts 1
        =begin
        puts 2
        puts 3
        puts 4
        =end
        ptus5
        ```
        
        ```ruby
        1
        5
        ```
        
    - 📍**まとめ**
        - #から書き始めた行はコメントになる。
        - コメントはプログラムとして実行されない。
        - #は行の途中にも書くことができ、その後ろがコメントになる。
        - 空行は無視される。
- 2-5 対話的に実行する
    
    ここまでは、プログラムが書かれたファイルをRubyに渡して、まとめて実行させていました。こうしたやり方のほかに、入力したプログラムを1行ずつその場ですぐに実行させることができるirbという道具もあります。irbを使うと、1行ずつ結果を見ながらプログラムを実行していくことができます。
    
    - irbの使い方
        - 入力したプログラムを1行ずつその場ですぐに実行させることができるirbという道具があります。
        
        ```ruby
        irb(main):001:0> x = 2
        => 2
        irb(main):001:0> x
        => 2
        irb(main):001:0> x * 3
        => 6
        ```
        
        - irbを終了する場合はexitと入力してreturnキーを押します。
        
        ```ruby
        irb(main):001:0> exit
        ```
        
        - 終了すると、元のターミナルへ戻ります。irbの世界ではRuby言語を話し、ターミナルの世界ではshell言語を話します。違う世界の言語で命令しても、言葉が通じないのでうまく動きません。以下は、うまく動かない例です。
        
        ```ruby
        x = 2 # Ruby言語をコマンドプロンプト(shell言語)の世界で実行しようとしている
        sh: command not found: x # エラー
        ```
        
    - プログラムの途中で一時停止してirbを使う
        - irbには、プログラムの途中で一時停止して起動する方法もあります。
        
        ```ruby
        a = 1
        binding.irb
        puts a
        ```
        
        ```ruby
        From: birb.rb @ line 2 :
        
        		1:  a = 1
        =>  2: binding.irb
        		3: puts a
        
        irb(main):001:0>
        ```
        
        ```ruby
        irb(main):001:0> a = 2 # 変数aへ2を代入
        => 2
        irb(main):001:0> exit
        2 # プログラムが再開し、その後の行のputs aが実行されると、irbで代入した変数aの値が表示される
        ```
        
        - プログラム中でirbを使うためにはbinding.irbをプログラムの実行を一時停止したい場所へ書きます。この機能は、プログラムの間違いを見つけて直すのにも便利です。
    - 📍まとめ
        - irbを使うと1行ずつ入力したプログラムをその場ですぐに実行できる。
        - irbを終了する場合はexitと入力してreturnキーを押す。
        - irbはRuby言語を話す世界、コマンドプロンプトはshell言語を話す世界。
- 2-6 プログラムの間違いを見つけて直す
    
    プログラムを書いて一度でうまく動かすのは簡単ではありません。プログラムが意図通り動いているかを確かめ、間違えている部分(バグ)を見つけて直していくことをデバッグと言います。プログラミングの作業で重要な工程の一つです。
    
    - pメソッドを使って変数の中身を表示させる
        - pメソッドは後ろに書いた変数やオブジェクトを画面に表示するメソッドです。putsメソッドと似た機能で、デバッグの機械に使われます。何より1文字で短いので書くのが簡単です。
        
        ```ruby
        a = 3 / 2
        p a # ①
        b = a * 2
        puts b
        ```
        
        ```ruby
        1 # ②
        2
        ```
        
        - ①の行でpメソッドを使って変数aを表示させました。実行結果を見ると、1.5ではなく、1が表示されています。これは、整数/整数の計算結果は小数点以下が捨てられて整数になるためです。変数aに1.5を代入するには、3か2のどちらか、または両方を少数にすることで計算結果も少数になります。
        - **pメソッド**は、原則、デバッグの道具として使う。**putsメソッド**は、プログラムの機能として意図して表示する時に使う。
    - 📍まとめ
        - pメソッドは後ろに書いた変数やオブジェクトを表示する。
        - pメソッドは原則、デバッグの道具として使う。
- 2-7 エラーメッセージを読み解く
    
    この節では実際にエラーを起こして、そのときのメッセージの読み方と対応方法を説明します。ここでいろんなエラーに対応する経験を積んでおきましょう。エラーが起こった時の対応はP.40でも説明しているので、あわせて参考にしてください。
    
    - エラーメッセージの読み方
        - エラーが起きてもプログラムを修正して、意図した動きに少しずつ近づけていくのが普通のプログラミングの流れです。
        
        ```ruby
        put "hi"
        ```
        
        ```ruby
        Traceback (most recent call last):
        hi.rb:1:in `<main>': undefined method `put' for main:Object
        	(NoMethodError)
        Did you mean?  puts
        								putc
        ```
        
        - hi.rbは実行したファイル名。
        - 1はプログラムの何行目でエラーが起きたのかを教えてくれます。
        - in `<main>':は今回、得られる情報が少ないので説明を省略。
        - undefinde method `put' for main:Objectはエラーメッセージの本文です。undefinde method `put'は「定義されていないメソッド`put'」となり、「putメソッドを実行しようとしたが、定義(用意)されていないので困りました」というRubyからのメッセージです。
        - NoMethodErrorがエラーの名前で、メソッドが用意されていない時起きるエラーです。
        - まとめると、「1行目に書かれたputメソッドは定義されていません」という意味になります。
        - Did you mean?以降はRubyからの提案が書かれています。「Did you mean?」は「もしかして？」という意味です。後ろに書かれたputsとputcがRubyからの提案です。エラーメッセージ全体では以下のようになります。
        
        ```ruby
        「hi.rbの1行目に書かれたputメソッドは定義されていません。もしかして、putsやputcではないですか？」
        ```
        
        - エラーメッセージを読み解くことは、デバッグをする上で基礎となる重要な技術です。
    - いろいろなエラーメッセージを体験する
        - 変数の名前を間違えた:変数xに1を代入して、それを表示するプログラムを書くところ、間違えて変数yを表示しようとしたケースです。
        
        ```ruby
        x = 1
        p y
        ```
        
        ```ruby
        Traceback (most recent call last):
        xy.rb:2:in `<main>': undefined local variable or method `y' for
        	main:Object (NameError)
        
        # xy.rbの2行目でエラーが発生しました。undefined local variable or method `y'(定義されていない変数またはメソッド'y'です。NameError(名前エラー)です。
        ```
        
        - 0で割り算した:0で割り算をするとエラーが発生します。
        
        ```ruby
        p 1 / 0
        ```
        
        ```ruby
        Traceback (most recent call last):
        				1: from 0div.rb:1:in `<main>'
        0div.rb:1:in `/': divided by 0 (ZeroDivisionError)
        
        # 0dir.rbの1行目でエラーが発生しました。divided by 0(0での割り算)です。ZeroDivisionError(0除算エラー)です。
        ```
        
        - 実行するファイル名が違う:abc.rbをじっこうしようとしてab.rbという存在しないファイルを指定したときのエラーです。
        
        ```ruby
        puts "abc"
        ```
        
        ```ruby
        Traceback (most recent call last):
        ruby: No such file or derectory -- ab.rb (LoadError)
        
        # No such file or directory(このようなファイルやフォルダはない)です。ab.rbというファイルです。LoadError(読み込みエラー)です。
        ```
        
    - 📍まとめ
        - エラーメッセージはRubyからプログラマーである私たちへのさまざまなヒント。
        - エラーメッセージには実行しているファイル名、行番号、エラーの種類と内容、修正候補の情報がある。</details>

**<details><summary>CHAPTER 3 処理の流れを変える</summary>**
ここまでのプログラムは1本道で順番に実行していくものでした。プログラムは条件によって分岐し、異なる処理を実行することができます。この章では、条件を判断する方法と、それによって処理を分岐する方法を説明します。また、同じ処理を繰り返す方法も説明します。

条件分岐も、繰り返しも、よく使われる便利な部品なので、これらを使うとプログラムで解決できる問題の範囲がぐっと広がります。
